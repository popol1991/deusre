<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="filter">
<head>
    <meta charset='utf-8'>
    <title>arXiv Table Search</title>
    <link rel='stylesheet' href='/static/css/reset.css'>
    <link rel='stylesheet' href='/static/css/arxiv.css'>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/parsley.min.js"></script>
    <script src="/static/js/angular.min.js"></script>
    <script src="/static/js/filter.js"></script>
    <script>
        function toggle(id) {
            $("tbody#"+id).toggle();
        };
        function addfilter() {
            var res = $(".results-container");
            var newtop = String(parseInt(res.css("padding-top").slice(0,-2)) + 35) + "px";
            res.css("padding-top", newtop);
            var res = $(".addfilter");
            var newtop = String(parseInt(res.css("top").slice(0,-2)) + 35) + "px";
            res.css("top", newtop);
            var res = $(".addbtn");
            var newtop = String(parseInt(res.css("top").slice(0,-2)) + 35) + "px";
            res.css("top", newtop);
        };
    </script>
</head>

<!-- Title and search box -->
<header class="jumbotron" data-ng-controller='filterCtrl'>
  <h1 class="title"><a>Table arXiv</a></h1>
  <div class="search-box-container">
      <form data-parsley-validate action="./" method="get">
        <input type="submit" class="search-button" value="Search">
        <select name="domain" class="search-domain">
            <option>All Domain</option>
        </select>
        <input type='text' name="q" class="search-box" placeholder="Keywords" value="{{ params['q'] }}" autofocus>
        <table class="filter">
		<tr class="filter_item" ng-repeat="filter in filterlist">
            <td><select ng-model="filter.selected" required ng-options="item as item.label for item in filters track by item.id">
            </select></td>
            <td><input data-parsley-type="number" name="{[ filter.selected.name ]}_min"/></td>
            <td><input data-parsley-type="number" name="{[ filter.selected.name]}_max"/></td>
		</tr>
		</table>
    </form>
  </div>
  <a class="about" href="./about.html">About</a>
    <div id="trapezoid" class="addbtn"></div>
    <button class="addfilter" type="button" onclick="addfilter()" ng-click="addFilter()">Add Filter</button>
</header>

<!-- Listing of search results -->
<main class="results-container">
    {% if len == 0 %}
    <p>No results found.</p>
    {% endif  %}
  <section class='results'>
    {% for hit in hits %}
    <article class='result'>
      <!--<h2>{{ hit.id}}</h2>-->
      <h2><a href="{{ hit.link }}">{{ hit.caption }}</a></h2>
      <h3>From: {{ hit['article-title']}}</h3>
      <h3>Subject: {{ hit['subject']}}</h3>
      <!--<p>{{hit.journal}}, {{hit.issn}}, {{hit.volume}}, {{hit.issue}}, {{hit.page}}, {{hit.date}}</p>-->
      <!--<p>-->
          <!--<b>Authors: </b>-->
          <!--<span>{{ ", ".join(hit.authors) }}</span>-->
      <!--</p>-->
      <!--<p>-->
          <!--<b>Keywords: </b>-->
          <!--<span>{{ ", ".join(hit.keywords) }}</span>-->
      <!--</p>-->
      <br>
      <table class="result_table">
          <thead>
            {% for row in hit.header_rows %}
              <tr>
                {% for header in row %}
                  <th class="result_table">
                    {{ header.value }}
                  </th>
                {% endfor %}
              </tr>
            {% endfor %}
          </thead>
          <tbody id="{{ hit.id }}" style="display:none">
          {% if 'data_rows' in hit %}
              {% for row in hit.data_rows %}
              <tr>
                  {% if row %}
                    {% for value in row %}
                        <td id="cell" class="result_table highlight_{{ value.highlight }}">
                        {{ value.text }}
                        </td>
                    {% endfor %}
                  {% endif %}
              </tr>
              {% endfor %}
          {% endif %}
          </tbody>
      </table>
      <a class="toggle" onclick="toggle({{hit.id}})">Show/Hide table.</a>
    </article>
    {% endfor %}
  </section>
</main>

</body>
</html>
